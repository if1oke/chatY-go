# üß† ChatY-Go

–õ—ë–≥–∫–∏–π, —á–∏—Å—Ç—ã–π TCP-—á–∞—Ç –Ω–∞ Go ‚Äî –∫–∞–∫ –≤ —Å—Ç–∞—Ä—ã–µ –¥–æ–±—Ä—ã–µ, –Ω–æ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –Ω–æ–≤–æ–≥–æ –≤–µ–∫–∞.

## üîê Auth Service (gRPC)

–î–æ–±–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å `auth` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ gRPC-–ø—Ä–æ—Ç–æ–∫–æ–ª—É.

üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- `internal/application/auth` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–∑–∞–≥–ª—É—à–∫–∞ –ø–æ–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Å–µ—Ö) + DI
- `internal/api/grpc/auth` ‚Äî gRPC-—Ö–µ–Ω–¥–ª–µ—Ä
- `cmd/auth` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫

üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
go run cmd/auth/main.go
```

üéØ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Login:

```proto
rpc Login(LoginRequest) returns (LoginResponse);
```

üõ† –í—Ä–µ–º–µ–Ω–Ω–æ –≤—Å–µ –ª–æ–≥–∏–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã, –Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å –±–∞–∑–æ–π, —Ç–æ–∫–µ–Ω–∞–º–∏ –∏ —Ç.–ø.

## üöÄ Chat Server (TCP)

```bash
go run cmd/server/main.go
```
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç –ø–æ –∞–¥—Ä–µ—Å—É –∏ –ø–æ—Ä—Ç—É –∏–∑ .env (–Ω–∞–ø—Ä–∏–º–µ—Ä, localhost:9000).

## üí¨ –ö–æ–º–∞–Ω–¥—ã —á–∞—Ç–∞

–í–≤–æ–¥—è—Ç—Å—è –ø—Ä—è–º–æ –≤ —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞. –ù–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `/`

| –ö–æ–º–∞–Ω–¥–∞                  | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|--------------------------|-----------------------------------------------|
| `/nick <–∏–º—è>`            | –ò–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–π –Ω–∏–∫–Ω–µ–π–º                         |
| `/list`                  | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `/exit`                  | –í—ã–π—Ç–∏ –∏–∑ —á–∞—Ç–∞                                 |
| `/help`                  | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥                        |
| `/whisper <–Ω–∏–∫> <—Ç–µ–∫—Å—Ç>` | –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —é–∑–µ—Ä—É  |

### üîÑ –ü—Ä–∏–º–µ—Ä—ã:
```txt
/nick IgorKilla
/list
/exit
/whisper Igor –ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?
```

## üîê –ü–æ–≤–µ–¥–µ–Ω–∏–µ

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∏–∫ –≤–∏–¥–∞ `User_127.0.0.1:XXXX`
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è (–≤—Ö–æ–¥/–≤—ã—Ö–æ–¥/—Å–º–µ–Ω–∞ –Ω–∏–∫–∞) ‚Äî —Ä–∞—Å—Å—ã–ª–∞—é—Ç—Å—è –æ—Å—Ç–∞–ª—å–Ω—ã–º
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ —Ä–∞—Å—Å—ã–ª–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `[nickname]: —Å–æ–æ–±—â–µ–Ω–∏–µ`
#### üîê –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã /whisper
- –°–æ–æ–±—â–µ–Ω–∏–µ —É—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å–∞—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é
- –ï—Å–ª–∏ –Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ—à–∏–±–∫–∞
- –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—É—Å—Ç–æ–µ ‚Äî –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å

## üí° –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ —Å–ª–æ–∏:

* `cmd/server` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
* `internal/api/tcp` ‚Äî TCP-—Å–µ—Ä–≤–µ—Ä, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
* `internal/domain/` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
* `internal/application/session` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, —Ä–∞—Å—Å—ã–ª–∫–∞, —á—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
* `internal/application/server` ‚Äî DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–Ω–µ–¥—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ‚Äî —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ.

## üì¶ –¢–µ–∫—É—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
* TCP-—Å–µ—Ä–≤–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
* –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º —á–µ—Ä–µ–∑ sync.Mutex
* –õ–æ–≥–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤–Ω—É—Ç—Ä–∏ ChatSession
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥
* –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìù –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –í—Å–µ —Å–æ–±—ã—Ç–∏—è –ø–∏—à—É—Ç—Å—è –≤ `logs/chat.log`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ILogger` —Å –∞–¥–∞–ø—Ç–µ—Ä–æ–º –Ω–∞ `logrus`
- –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `logs/chat.log` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ILogger` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ª–æ–≥–≥–µ—Ä–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —Å–ª–æ—è—Ö (`Application`, `Session`, `TCP Server`)
- –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤: Info, Warn, Error, Debug
- –†–∞—Å—à–∏—Ä—è–µ–º–æ –∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üìä –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤:

| –£—Ä–æ–≤–µ–Ω—å | –ü—Ä–∏–º–µ—Ä—ã                                      |
|---------|----------------------------------------------|
| INFO    | `[CONNECT]`, `[JOIN]`, `[LEAVE]`, `[SERVER]` |
| WARN    | `[WHISPER FAIL]`, –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è         |
| ERROR   | –û—à–∏–±–∫–∏ –∑–∞–ø–∏—Å–∏, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø–∞–¥–µ–Ω–∏—è           |
| DEBUG   | (–ø–æ –∂–µ–ª–∞–Ω–∏—é, –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –ø–æ–∑–∂–µ)           |

## ü§ù –ê–≤—Ç–æ—Ä
–ë—Ä–∞—Ç–∞–Ω, –∫–æ—Ç–æ—Ä—ã–π –µ–±–∞—à–∏–ª –Ω–µ –≤ —Ç–µ–æ—Ä–∏–∏, –∞ –≤ –±–æ—é üí™ –ü–æ—Å—Ç–∏–≥–∞–ª –æ—Å–Ω–æ–≤—ã DDD –∏ —á–∏—Å—Ç–æ—Ç—ã –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.